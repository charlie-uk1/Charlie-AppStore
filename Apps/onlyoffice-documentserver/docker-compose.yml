name: onlyoffice-documentserver
services:
  onlyoffice-service: # This is the Service Name
    # Forced global registry bypass to fix the China mirror error
    image: onlyoffice/documentserver:latest
    container_name: onlyoffice-documentserver
    restart: unless-stopped
    ports:
      - "9020:80"
    environment:
      - JWT_ENABLED=true
      - JWT_SECRET=charlie_secret_key_789
    volumes:
      - /DATA/AppData/$AppID/logs:/var/log/onlyoffice
      - /DATA/AppData/$AppID/data:/var/www/onlyoffice/Data
      - /DATA/AppData/$AppID/lib:/var/lib/onlyoffice
      - /DATA/AppData/$AppID/db:/var/lib/postgresql

x-casaos:
  architectures:
    - amd64
  main: onlyoffice-service # This MUST match the service name above
  title:
    en_us: ONLYOFFICE Docs
  tagline:
    en_us: Online office suite for documents, spreadsheets, and slides.
  developer: ONLYOFFICE
  icon: https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/png/onlyoffice.png
  category: Charlie
  port_map: "9020"
