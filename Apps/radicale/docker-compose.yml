name: radicale
services:
  radicale:
    image: ghcr.io/kozea/radicale:stable
    container_name: radicale
    ports:
      - 5232:5232
    volumes:
      - /DATA/AppData/radicale/config:/etc/radicale
      - /DATA/AppData/radicale/data:/var/lib/radicale
    restart: unless-stopped
    # This command creates the config and user files automatically on startup
    command: >
      sh -c "
      mkdir -p /etc/radicale &&
      echo '[auth]\ntype = htpasswd\nhtpasswd_filename = /etc/radicale/users\nhtpasswd_encryption = plain\n\n[server]\nhosts = 0.0.0.0:5232' > /etc/radicale/config &&
      echo 'your_username:your_password' > /etc/radicale/users &&
      python3 -m radicale --config /etc/radicale/config
      "
    x-casaos:
      ports:
        - container: "5232"
          description:
            en_us: "Web Interface"
      volumes:
        - container: /etc/radicale
          description:
            en_us: "Configuration"
        - container: /var/lib/radicale
          description:
            en_us: "Calendar/Contact Data"

x-casaos:
  architectures:
    - amd64
    - arm64
  main: radicale
  author: Kozea
  category: Charlie
  description:
    en_us: "A lightweight CalDAV and CardDAV server. Use the username/password defined in the Compose file."
  developer: Radicale Team
  icon: https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/png/radicale.png
  tagline:
    en_us: "Simple Calendar & Contact Sync."
  title:
    en_us: Radicale
  port_map: "5232"
